{"ast":null,"code":"/**\r\n * DevExtreme (events/pointer/observer.js)\r\n * Version: 19.2.7\r\n * Build date: Thu Mar 26 2020\r\n *\r\n * Copyright (c) 2012 - 2020 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\n\"use strict\";\n\nvar each = require(\"../../core/utils/iterator\").each;\n\nvar readyCallbacks = require(\"../../core/utils/ready_callbacks\");\n\nvar domAdapter = require(\"../../core/dom_adapter\");\n\nvar addEventsListener = function (events, handler) {\n  readyCallbacks.add(function () {\n    events.split(\" \").forEach(function (event) {\n      domAdapter.listen(domAdapter.getDocument(), event, handler, true);\n    });\n  });\n};\n\nvar Observer = function (eventMap, pointerEquals, onPointerAdding) {\n  onPointerAdding = onPointerAdding || function () {};\n\n  var pointers = [];\n\n  var getPointerIndex = function (e) {\n    var index = -1;\n    each(pointers, function (i, pointer) {\n      if (!pointerEquals(e, pointer)) {\n        return true;\n      }\n\n      index = i;\n      return false;\n    });\n    return index;\n  };\n\n  var addPointer = function (e) {\n    if (getPointerIndex(e) === -1) {\n      onPointerAdding(e);\n      pointers.push(e);\n    }\n  };\n\n  var removePointer = function (e) {\n    var index = getPointerIndex(e);\n\n    if (index > -1) {\n      pointers.splice(index, 1);\n    }\n  };\n\n  var updatePointer = function (e) {\n    pointers[getPointerIndex(e)] = e;\n  };\n\n  addEventsListener(eventMap.dxpointerdown, addPointer);\n  addEventsListener(eventMap.dxpointermove, updatePointer);\n  addEventsListener(eventMap.dxpointerup, removePointer);\n  addEventsListener(eventMap.dxpointercancel, removePointer);\n\n  this.pointers = function () {\n    return pointers;\n  };\n\n  this.reset = function () {\n    pointers = [];\n  };\n};\n\nmodule.exports = Observer;","map":null,"metadata":{},"sourceType":"script"}