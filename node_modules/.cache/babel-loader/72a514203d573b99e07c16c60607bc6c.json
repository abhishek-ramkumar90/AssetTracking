{"ast":null,"code":"/**\r\n * DevExtreme (exporter/pdf_creator.js)\r\n * Version: 19.2.7\r\n * Build date: Thu Mar 26 2020\r\n *\r\n * Copyright (c) 2012 - 2020 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\n\"use strict\";\n\nvar VERSION = require(\"../core/version\");\n\nvar window = require(\"../core/utils/window\").getWindow();\n\nvar imageCreator = require(\"./image_creator\").imageCreator;\n\nvar isFunction = require(\"../core/utils/type\").isFunction;\n\nvar extend = require(\"../core/utils/extend\").extend;\n\nvar mainPageTemplate = \"%PDF-1.3\\r\\n2 0 obj\\r\\n<</ProcSet[/PDF/ImageB/ImageC/ImageI]/XObject<</I0 5 0 R>>>>\\r\\nendobj\\r\\n4 0 obj\\r\\n<</Type/Pages/Kids[1 0 R]/Count 1>>\\r\\nendobj\\r\\n7 0 obj\\r\\n<</OpenAction[1 0 R /FitH null]/Type/Catalog/Pages 4 0 R/PageLayout/OneColumn>>\\r\\nendobj\\r\\n1 0 obj\\r\\n<</Type/Page/Resources 2 0 R/MediaBox[0 0 _width_ _height_]/Contents 3 0 R/Parent 4 0 R>>\\r\\nendobj\\r\\n\";\nvar contentTemplate = \"3 0 obj\\r\\n<</Length 52>>stream\\r\\n0.20 w\\n0 G\\nq _width_ 0 0 _height_ 0.00 0.00 cm /I0 Do Q\\r\\nendstream\\r\\nendobj\\r\\n\";\nvar infoTemplate = \"6 0 obj\\r\\n<</CreationDate _date_/Producer(DevExtreme _version_)>>\\r\\nendobj\\r\\n\";\nvar imageStartTemplate = \"5 0 obj\\r\\n<</Type/XObject/Subtype/Image/Width _width_/Height _height_/ColorSpace/DeviceRGB/BitsPerComponent 8/Filter/DCTDecode/Length _length_>>stream\\r\\n\";\nvar imageEndTemplate = \"\\r\\nendstream\\r\\nendobj\\r\\n\";\nvar trailerTemplate = \"trailer\\r\\n<<\\r\\n/Size 8\\r\\n/Root 7 0 R\\r\\n/Info 6 0 R\\r\\n>>\\r\\nstartxref\\r\\n_length_\\r\\n%%EOF\";\nvar xrefTemplate = \"xref\\r\\n0 8\\r\\n0000000000 65535 f\\r\\n0000000241 00000 n\\r\\n0000000010 00000 n\\r\\n_main_ 00000 n\\r\\n0000000089 00000 n\\r\\n_image_ 00000 n\\r\\n_info_ 00000 n\\r\\n0000000143 00000 n\\r\\n\";\n\nvar pad = function pad(str, len) {\n  return str.length < len ? pad(\"0\" + str, len) : str;\n};\n\nvar composePdfString = function (imageString, options, curDate) {\n  var margin = 2 * (options.margin || 0);\n  var width = options.width + margin;\n  var height = options.height + margin;\n  var widthPt = (.75 * width).toFixed(2);\n  var heightPt = (.75 * height).toFixed(2);\n  var mainPage = mainPageTemplate.replace(\"_width_\", widthPt).replace(\"_height_\", heightPt);\n  var content = contentTemplate.replace(\"_width_\", widthPt).replace(\"_height_\", heightPt);\n  var info = infoTemplate.replace(\"_date_\", curDate).replace(\"_version_\", VERSION);\n  var image = imageStartTemplate.replace(\"_width_\", width).replace(\"_height_\", height).replace(\"_length_\", imageString.length) + imageString + imageEndTemplate;\n  var xref = getXref(mainPage.length, content.length, info.length);\n  var mainContent = mainPage + content + info + image;\n  var trailer = trailerTemplate.replace(\"_length_\", mainContent.length);\n  return mainContent + xref + trailer;\n};\n\nvar getXref = function (mainPageLength, contentLength, infoLength) {\n  return xrefTemplate.replace(\"_main_\", pad(mainPageLength + \"\", 10)).replace(\"_info_\", pad(mainPageLength + contentLength + \"\", 10)).replace(\"_image_\", pad(mainPageLength + contentLength + infoLength + \"\", 10));\n};\n\nvar getCurDate = function () {\n  return new Date();\n};\n\nvar getBlob = function (binaryData) {\n  var i = 0;\n  var dataArray = new Uint8Array(binaryData.length);\n\n  for (; i < binaryData.length; i++) {\n    dataArray[i] = binaryData.charCodeAt(i);\n  }\n\n  return new window.Blob([dataArray.buffer], {\n    type: \"application/pdf\"\n  });\n};\n\nvar getBase64 = function (binaryData) {\n  return window.btoa(binaryData);\n};\n\nexports.getData = function (data, options) {\n  return imageCreator.getImageData(data, extend({}, options, {\n    format: \"JPEG\"\n  })).then(function (imageString) {\n    var binaryData = composePdfString(imageString, options, getCurDate());\n    var pdfData = isFunction(window.Blob) ? getBlob(binaryData) : getBase64(binaryData);\n    return pdfData;\n  });\n};","map":null,"metadata":{},"sourceType":"script"}