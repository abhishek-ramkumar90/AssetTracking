{"ast":null,"code":"/**\r\n * DevExtreme (core/utils/resize_callbacks.js)\r\n * Version: 19.2.7\r\n * Build date: Thu Mar 26 2020\r\n *\r\n * Copyright (c) 2012 - 2020 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\n\"use strict\";\n\nvar windowUtils = require(\"./window\");\n\nvar domAdapter = require(\"../dom_adapter\");\n\nvar Callbacks = require(\"./callbacks\");\n\nvar readyCallbacks = require(\"./ready_callbacks\");\n\nvar callOnce = require(\"./call_once\");\n\nvar resizeCallbacks = function () {\n  var prevSize;\n  var callbacks = Callbacks();\n  var originalCallbacksAdd = callbacks.add;\n  var originalCallbacksRemove = callbacks.remove;\n\n  if (!windowUtils.hasWindow()) {\n    return callbacks;\n  }\n\n  var formatSize = function () {\n    var window = windowUtils.getWindow();\n    return {\n      width: window.innerWidth,\n      height: window.innerHeight\n    };\n  };\n\n  var handleResize = function () {\n    var now = formatSize();\n\n    if (now.width === prevSize.width && now.height === prevSize.height) {\n      return;\n    }\n\n    var changedDimension;\n\n    if (now.width === prevSize.width) {\n      changedDimension = \"height\";\n    }\n\n    if (now.height === prevSize.height) {\n      changedDimension = \"width\";\n    }\n\n    prevSize = now;\n    callbacks.fire(changedDimension);\n  };\n\n  var setPrevSize = callOnce(function () {\n    prevSize = formatSize();\n  });\n  var removeListener;\n\n  callbacks.add = function () {\n    var result = originalCallbacksAdd.apply(callbacks, arguments);\n    setPrevSize();\n    readyCallbacks.add(function () {\n      if (!removeListener && callbacks.has()) {\n        removeListener = domAdapter.listen(windowUtils.getWindow(), \"resize\", handleResize);\n      }\n    });\n    return result;\n  };\n\n  callbacks.remove = function () {\n    var result = originalCallbacksRemove.apply(callbacks, arguments);\n\n    if (!callbacks.has() && removeListener) {\n      removeListener();\n      removeListener = void 0;\n    }\n\n    return result;\n  };\n\n  return callbacks;\n}();\n\nmodule.exports = resizeCallbacks;","map":null,"metadata":{},"sourceType":"script"}